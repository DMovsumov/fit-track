# Fit-Track Bot

Telegram-бот для расчёта нормы воды, калорий и трекинга активности.

## Описание

Бот помогает пользователям:
- Рассчитать индивидуальные дневные нормы воды и калорий с учётом параметров пользователя, уровня активности и текущей погоды
- Отслеживать потребление воды и калорий
- Логировать тренировки и пересчитывать расход калорий
- Логировать питание с использованием реальных данных продуктов через OpenFoodFacts API

## Функционал

### 1. Настройка профиля (`/set_profile`)
Бот запрашивает:
- Вес (в кг)
- Рост (в см)
- Возраст
- Уровень активности (минуты в день)
- Город (для получения температуры)
- Цель (похудение, массонабор, поддержание)

После настройки автоматически рассчитываются дневные нормы воды и калорий.

### 2. Расчёт норм

**Норма воды:**
- Базовая норма = Вес × 30 мл/кг
- +500 мл за каждые 30 минут активности
- +500-1000 мл за жаркую погоду (>25°C)

**Норма калорий:**
- Формула Миффлина-Сан Жеора: BMR = 10 × вес + 6.25 × рост - 5 × возраст
- Калории за активность (6 ккал/мин)
- Базовые калории для поддержания жизнедеятельности

### 3. Логирование воды (`/log_water <количество>`)
Сохраняет количество выпитой воды и показывает прогресс.

### 4. Логирование еды (`/log_food <название продукта>`)
Использует OpenFoodFacts API для получения информации о продукте. После ввода названия бот запрашивает количество в граммах и рассчитывает калории.

### 5. Логирование тренировок (`/log_workout <тип> <время>`)
Фиксирует сожжённые калории и рекомендует дополнительное потребление воды.

### 6. Прогресс (`/check_progress`)
Показывает текущий прогресс по воде и калориям за день.

### 7. Графики (`/graph [дней]`)
Строит график прогресса по воде и калориям за указанное количество дней (по умолчанию 7 дней, максимум 30).

### 8. Рекомендации (`/recommendations`)
Предоставляет персональные рекомендации по продуктам и тренировкам на основе цели пользователя:
- Для похудения: низкокалорийные продукты и кардио-тренировки
- Для массонабора: высококалорийные продукты и силовые тренировки
- Для поддержки: сбалансированные рекомендации

### 9. Просмотр профиля (`/profile`)
Предоставляет данные по заполненному профилю пользователя.

## Установка

1. Установите зависимости:
```bash
uv sync
```

2. Создайте файл `.env` на основе `.env.example`:
```bash
cp .env.example .env
```

4. Заполните переменные окружения в `.env`:
   - `BOT_TOKEN` - токен вашего Telegram бота (получите у [@BotFather](https://t.me/BotFather))
   - `OPENWEATHER_API_KEY` - API ключ OpenWeatherMap (опционально, получите на [openweathermap.org](https://openweathermap.org/api))

5. Запустите бота:
```bash
uv run python main.py
```

## Использование

1. Запустите бота командой `/start`
2. Настройте профиль командой `/set_profile`
3. Используйте команды для логирования воды, еды и тренировок
4. Проверяйте прогресс командой `/check_progress`
5. Смотрите график прогресса командой `/graph`
6. Получайте рекомендации командой `/recommendations`

## Команды

- `/start` - начать работу с ботом
- `/help` - показать справку по командам
- `/set_profile` - настроить профиль пользователя
- `/log_water <количество>` - добавить выпитую воду (в мл)
- `/log_food <продукт>` - добавить съеденный продукт (использует улучшенный поиск)
- `/log_workout <тип> <время>` - добавить тренировку
- `/check_progress` - посмотреть текущий прогресс
- `/graph [дней]` - показать график прогресса (по умолчанию 7 дней)
- `/recommendations` - получить персональные рекомендации
- `/profile` - посмотреть профиль пользователя

## Backlog

1. Перенести хранение данных в базу данных
2. Пройтись по проекту и добавить проверки при неправильном вводе данных (Пример, см `/log_water`)
3. Уйти от open `world.openfoodfacts.org` и рассмотреть более удобный способ получения информации о продуктах, например, используя Api LLM
4. Добавить команду `/log_sleep <время>` для отслеживания сна
5. Сделать более умное сохранение тренировок и добавить построение данных для тренировок. Чтобы удобнее отслеживать прогресс в тренировках.
6. Подумать над общей архитектурой проекта и оптимизировать код.
